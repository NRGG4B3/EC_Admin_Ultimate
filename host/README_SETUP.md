# EC_Admin_Ultimate Setup Scripts

This directory contains setup scripts for EC_Admin_Ultimate. Choose the one that best fits your needs.

## Quick Start (Recommended)

### `setup-quick.bat` - Automated Setup

**Best for:** First-time setup, fresh installation

```bash
setup-quick.bat
```

**What it does:**
- ✓ Checks Node.js and npm
- ✓ Builds React UI with Vite (automatically)
- ✓ Sets up Host API dependencies
- ✓ Creates release package
- ✓ Generates ZIP archive
- ✓ Creates `.env` configuration
- ✓ Verifies everything is working

**Output:**
- `ui/dist/` - Built React application
- `host/release/EC_Admin_Ultimate/` - Ready-to-deploy package
- `release.zip` - Compressed archive
- `host/node-server/.env` - Configuration file

## Standard Setup

### `setup.bat` - Full Control Setup

**Best for:** Advanced users, custom deployments

```bash
setup.bat
```

**Same as quick setup but with more verbose output.**

## Starting the Server

### After Setup: Run `start.bat`

```bash
start.bat
```

**This will:**
- Start the Host API server (Node.js)
- Listen on port 30121
- Serve the built UI files
- Connect to your database

### Stopping the Server

```bash
stop.bat
```

## Prerequisites

Before running setup, verify you have:

### 1. Node.js 16+ 

Check version:
```bash
node --version
```

If not installed: https://nodejs.org/ (Download LTS version)

### 2. npm 7+

Check version:
```bash
npm --version
```

(Comes automatically with Node.js)

### 3. PowerShell 5.0+

Windows 10/11 includes this by default.

Check version:
```bash
$PSVersionTable.PSVersion
```

## Troubleshooting Setup

### "UI didn't open" / "UI is blank"

**The UI must be built before it can display. Setup does this automatically.**

If the UI still doesn't work:

1. Check if `ui/dist/index.html` exists
2. Run setup again: `setup-quick.bat`
3. Check the console for error messages

### "Command not found: npm"

Node.js wasn't installed or PATH needs updating.

**Fix:**
1. Download Node.js from https://nodejs.org/
2. Run the installer (keeps default options)
3. Restart your terminal
4. Try again: `npm --version`

### "npm install failed"

Network or permission issue.

**Fix:**
1. Check your internet connection
2. Delete `ui/node_modules` folder
3. Run setup again
4. Or try: `npm cache clean --force`

### "Port 30121 already in use"

The API server is already running.

**Fix:**
1. Close other instances: `stop.bat`
2. Or change port in `host/node-server/.env` (change `PORT=30121`)
3. Restart with `start.bat`

### "Database connection failed"

Database credentials in `.env` are incorrect.

**Fix:**
1. Edit `host/node-server/.env`
2. Update: `DB_HOST`, `DB_USER`, `DB_PASSWORD`
3. Verify database is running
4. Restart: `start.bat`

## File Structure

After setup:
```
EC_Admin_Ultimate/
├── ui/
│   ├── dist/               ← Built UI files (generated by npm run build)
│   ├── src/                ← React source code
│   ├── package.json        ← UI dependencies
│   └── ...
├── host/
│   ├── node-server/
│   │   ├── .env            ← Configuration (created by setup)
│   │   ├── package.json    ← API dependencies
│   │   └── ...
│   ├── release/
│   │   └── EC_Admin_Ultimate/  ← Ready to deploy
│   ├── setup.bat           ← Full setup script
│   ├── setup-quick.bat     ← Quick setup (recommended)
│   ├── start.bat           ← Start server
│   └── stop.bat            ← Stop server
├── fxmanifest.lua          ← FiveM manifest
├── config.lua              ← Configuration
├── release.zip             ← Deployment archive (generated by setup)
└── ...
```

## The UI Build Process

The setup script automatically builds the React UI:

```
1. npm install         → Download dependencies
2. npm run build       → Build with Vite for production
3. Creates ui/dist/    → Optimized output (~500KB-2MB)
4. Copies to package   → Includes in release
```

**Why does the UI need to be built?**
- React source files are not directly readable by browsers
- Vite compiles and optimizes them into `dist/`
- Without building, the UI won't load

**Can I skip the build?**
- No, the UI files MUST be built before deployment
- The build only takes 1-2 minutes
- Setup does this automatically

## Environment Configuration

After setup, edit `host/node-server/.env`:

```bash
# Database Settings (REQUIRED)
DB_HOST=localhost          # Your database server
DB_PORT=3306               # MySQL port
DB_NAME=ec_admin_host      # Database name
DB_USER=root               # Database user
DB_PASSWORD=               # Database password

# API Settings
PORT=30121                 # API port
HOST=0.0.0.0               # API bind address
NODE_ENV=production        # Environment mode

# Security (CHANGE THESE)
JWT_SECRET=CHANGE_ME       # Generate random string
API_KEY=CHANGE_ME          # Your API key
```

## Next Steps

1. ✓ Run `setup-quick.bat` or `setup.bat`
2. ✓ Wait for completion (takes 2-5 minutes)
3. ✓ Edit `host/node-server/.env` (database settings)
4. ✓ Run `start.bat` (start server)
5. ✓ Test at `http://localhost:30121`
6. ✓ Upload `release.zip` to your FiveM server

## Getting Help

If setup fails:

1. **Read the error message** - It usually tells you what's wrong
2. **Check internet connection** - npm needs to download files
3. **Verify Node.js installed** - Run `node --version`
4. **Check disk space** - Build needs ~500MB free
5. **Check file permissions** - Run as Administrator if needed

## Support

For issues or questions:
- Check `SETUP_GUIDE.md` for detailed documentation
- Review console output for error details
- Ensure all prerequisites are installed
- Try running setup again

---

**Version:** 1.0  
**Last Updated:** December 3, 2025
